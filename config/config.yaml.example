# PolyHFT Trading Bot Configuration
# Copy this file to config.yaml and fill in your credentials
# Or use environment variables (recommended for security)

# General settings
paper_trading: true  # Set to false for live trading
polling_interval: 5.0  # Seconds between trading iterations
state_file: "bot_state.json"  # File to save/restore bot state
run_health_check_on_startup: false  # Run API health check on bot startup (set to true to verify data)
verbose_validation: false  # Enable verbose market data validation logging
use_exchange_adapter: true  # Use new exchange adapter pattern (recommended)

# WebSocket settings
websocket:
  enabled: true  # Enable WebSocket for real-time data (recommended for market making and HFT strategies)
  
# Rate limiting
rate_limiting:
  max_calls: 100  # Maximum API calls
  period: 60.0  # Time period in seconds
  backoff_factor: 2.0  # Exponential backoff multiplier
  max_backoff: 300.0  # Maximum backoff time in seconds

# Risk Management
risk:
  initial_capital: 100.0  # Starting capital in USD
  max_position_size: 10.0  # Maximum size per position
  max_total_exposure: 100.0  # Maximum total exposure across all positions
  max_per_market_exposure: 20.0  # Maximum exposure per market
  max_per_strategy_exposure: 50.0  # Maximum exposure per strategy
  max_drawdown_pct: 20.0  # Maximum drawdown percentage before stopping
  max_open_positions: 10  # Maximum number of open positions
  stop_loss_pct: 10.0  # Stop loss percentage per position

# Telegram Notifications
telegram:
  bot_token: null  # Bot token from BotFather (or set via TELEGRAM_BOT_TOKEN env var)
  chat_id: null  # Will be auto-detected when you send a message to the bot

# API Configuration (can be overridden by environment variables)
api:
  polymarket:
    base_url: "https://clob.polymarket.com"
    # api_key and private_key loaded from environment variables
    # Set POLYMARKET_API_KEY and POLYMARKET_PRIVATE_KEY in .env file
  perpdex:
    base_url: "https://api.hyperliquid.xyz"  # Using Hyperliquid as Perpdex
    wallet_address: null  # API Wallet Address (or set via HYPERLIQUID_WALLET_ADDRESS env var)
    private_key: null  # Private Key (or set via HYPERLIQUID_PRIVATE_KEY env var)
    # Note: These can also be set via HYPERLIQUID_WALLET_ADDRESS and HYPERLIQUID_PRIVATE_KEY env vars

# Strategy Configurations

# Strategy 1: Hedging Positions
strategies:
  hedging:
    enabled: false  # Requires Perpdex API access
    min_profit_target_pct: 100.0  # Minimum profit target (100%)
    max_profit_target_pct: 150.0  # Maximum profit target (150%)
    btc_market_keywords:
      - "bitcoin"
      - "btc"
      - "crypto"
    position_size: 100.0

  # Strategy 2: Micro-Spread Farming
  micro_spreads:
    enabled: true
    min_buy_price: 0.05  # Minimum buy price ($0.05)
    max_buy_price: 0.10  # Maximum buy price ($0.10)
    min_profit_pct: 20.0  # Minimum profit percentage (20%)
    target_profit_pct: 120.0  # Target profit percentage (120%)
    position_size: 10.0  # Position size per trade
    max_spread_pct: 5.0  # Maximum spread to enter (5%)

  # Strategy 3: Liquidity Provision (Enhanced Market Making)
  liquidity:
    enabled: true
    min_spread_pct: 2.0  # Minimum spread to enter (2%)
    max_spread_pct: 10.0  # Maximum spread to consider (10%)
    position_size: 50.0  # Position size per side
    tighten_pct: 50.0  # Tighten spread by this percentage (50%)
    max_reward_per_market: 50.0  # Maximum reward per market ($50)
    # Enhanced market making parameters
    price_chase_threshold: 0.3  # Chase threshold percentage (30%)
    bid_offset: 0.0  # Bid offset from top bid (USDT)
    ask_offset: 0.0  # Ask offset from top ask (USDT)
    refresh_interval_ms: 1500  # Refresh interval in milliseconds
    max_close_slippage_pct: 0.05  # Maximum slippage when closing (5%)

  # Strategy 4: Single-Market Arbitrage
  single_arbitrage:
    enabled: true
    max_total_price: 0.99  # Maximum total price for YES+NO ($0.99)
    min_profit_pct: 1.0  # Minimum profit percentage (1%)
    position_size: 100.0  # Position size per outcome
    require_clear_resolution: true  # Only trade markets with clear resolution rules

  # Strategy 5: Low-Volume High-Spread (Split Orders)
  # Perfect for small traders - whales can't access these markets
  # Find newly launched markets with <$10k volume and >10¢ spreads
  # Use split orders to buy YES+NO for $1, then place strategic limit orders
  low_volume_spread:
    enabled: true
    max_volume_usd: 10000.0  # Maximum market volume ($10k) - whales won't touch these
    min_spread_cents: 10.0  # Minimum spread (10¢) - ensures good profit opportunity
    max_market_age_days: 7  # Only trade markets launched in last 7 days
    split_amount: 1.0  # Amount to split (1 USDC = 1 YES + 1 NO)
    comfortable_side_price: 0.95  # Price for side you're comfortable holding (95¢)
    quick_sell_price: 0.25  # Price for side you want to sell quickly (25¢)
    min_profit_cents: 5.0  # Minimum profit required (5¢)
    preferred_side: "YES"  # Which side you prefer to hold (YES or NO)

  # Strategy 6: Continuous Market Making (Band-Based Order Management) [BETA]
  # Maintains orders in bands around market price, continuously adjusting as market moves
  # Based on polymarket-marketmaking approach: https://github.com/elielieli909/polymarket-marketmaking
  # ⚠️ BETA: This strategy is under evaluation. Use with caution and monitor closely.
  market_making:
    enabled: false  # Enable continuous market making
    beta: true  # BETA STATUS: Under evaluation - use with caution
    bands_file: "config/bands.json"  # Path to bands configuration file
    update_interval: 1.0  # Update orders every N seconds (default: 1 second)
    market_id: null  # Specific market ID to trade (null = scan all markets)
    outcome: "YES"  # Outcome to trade (YES or NO)
    min_order_size: 1.0  # Minimum order size in USDC


  # Strategy 7: Spread Scalping
  # Scalps spreads on liquid markets with >3 days to expiry
  spread_scalping:
    enabled: true
    min_spread_cents: 0.03
    min_liquidity: 10000.0
    min_days_to_expiry: 3
    likely_outcome_threshold: 0.70
    order_size_usdc: 10.0
    max_positions: 5
    markets_per_scan: 1000      # Markets to check per iteration (rotating scan)
    full_scan_interval: 10      # Reset cursor every N iterations to catch new markets

  # Strategy 8: Tail-End Trading (High Probability)
  # Buy outcomes >$0.93 near expiry (<7 days) for safe returns
  tail_end:
    enabled: true
    min_price: 0.93
    max_price: 0.98
    max_days_to_expiry: 7
    position_size: 50.0  # Safe size for high probability
    stop_loss: 0.85

  # Strategy 9: Combinatorial Arbitrage (Correlated Markets)
  # Detect divergences between logically linked markets
  combinatorial:
    enabled: true
    divergence_threshold: 0.10  # 10% price difference triggers alert
    keywords:
      - "Bitcoin"
      - "Ethereum"
      - "Solana"
      - "Trump"
      - "Biden"
      - "Fed Rate"

  # Strategy 10: Legged Arbitrage (Directional Scalping)
  # Buy cheap leg (e.g. 25c), wait, buy other leg to lock profit (e.g. at 45c -> 70c cost)
  legged_arbitrage:
    enabled: true
    keywords: ["Bitcoin", "BTC"]
    entry_max_price: 0.30     # Only buy legs cheaper than this
    max_total_cost: 0.95      # Hedge when Leg1 + Leg2 < 0.95
    position_size: 10.0
    stop_loss_pct: 0.20       # Sell Leg1 if price drops 20%
    max_concurrent_positions: 3

